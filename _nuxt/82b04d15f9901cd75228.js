(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{251:function(t,e,o){var content=o(257);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(28).default)("0f37d318",content,!0,{sourceMap:!1})},256:function(t,e,o){"use strict";var n=o(251);o.n(n).a},257:function(t,e,o){(t.exports=o(27)(!1)).push([t.i,".bg[data-v-6f6a29d6]{bottom:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.8);z-index:100}.bg[data-v-6f6a29d6],.loading-box[data-v-6f6a29d6]{position:absolute}.loading-box[data-v-6f6a29d6]{top:50%;left:50%;width:140px;height:140px;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background-color:#fff;border-radius:30px;z-index:101}.spinner[data-v-6f6a29d6]{margin:60px auto;width:70px;text-align:center}.spinner>div[data-v-6f6a29d6]{width:18px;height:18px;background-color:orange;border-radius:100%;display:inline-block;-webkit-animation:sk-bouncedelay-data-v-6f6a29d6 1.4s ease-in-out infinite both;animation:sk-bouncedelay-data-v-6f6a29d6 1.4s ease-in-out infinite both}.spinner .bounce1[data-v-6f6a29d6]{-webkit-animation-delay:-.32s;animation-delay:-.32s}.spinner .bounce2[data-v-6f6a29d6]{-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes sk-bouncedelay-data-v-6f6a29d6{0%,80%,to{-webkit-transform:scale(0)}40%{-webkit-transform:scale(1)}}@keyframes sk-bouncedelay-data-v-6f6a29d6{0%,80%,to{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}",""])},259:function(t,e,o){"use strict";o(256);var n=o(29),component=Object(n.a)({},(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"bg"},[e("div",{staticClass:"loading-box"},[e("div",{staticClass:"spinner"},[e("div",{staticClass:"bounce1"}),this._v(" "),e("div",{staticClass:"bounce2"}),this._v(" "),e("div",{staticClass:"bounce3"})])])])])}],!1,null,"6f6a29d6",null);e.a=component.exports},268:function(t,e,o){var content=o(292);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(28).default)("7af586b0",content,!0,{sourceMap:!1})},269:function(t,e,o){var content=o(294);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(28).default)("3cd1c23e",content,!0,{sourceMap:!1})},270:function(t,e,o){var content=o(296);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(28).default)("0fb20426",content,!0,{sourceMap:!1})},271:function(t,e,o){var content=o(298);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(28).default)("2820c388",content,!0,{sourceMap:!1})},272:function(t,e,o){var content=o(300);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(28).default)("700b2982",content,!0,{sourceMap:!1})},273:function(t,e,o){var content=o(302);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(28).default)("4c0237c0",content,!0,{sourceMap:!1})},291:function(t,e,o){"use strict";var n=o(268);o.n(n).a},292:function(t,e,o){(t.exports=o(27)(!1)).push([t.i,".box[data-v-6b9b6b13]{overflow:hidden;background-color:#fff;box-shadow:0 11px 143px -53px rgba(0,0,0,.7);height:110px;padding:20px 40px 0;z-index:3}.title[data-v-6b9b6b13]{font-size:32px}.sub-title[data-v-6b9b6b13]{font-size:14px;color:grey}",""])},293:function(t,e,o){"use strict";var n=o(269);o.n(n).a},294:function(t,e,o){(t.exports=o(27)(!1)).push([t.i,".type-bar[data-v-001cdadf]{position:absolute;padding:20px;bottom:0;height:80px}",""])},295:function(t,e,o){"use strict";var n=o(270);o.n(n).a},296:function(t,e,o){(t.exports=o(27)(!1)).push([t.i,".box[data-v-40cdeace]{margin:10px;min-width:80%}.name[data-v-40cdeace]{font-size:12px;margin:8px 0 10px 5px;color:grey}.bubble[data-v-40cdeace]{color:#000;background-color:#fff;border-radius:10px;padding:8px;width:unset;min-width:unset}",""])},297:function(t,e,o){"use strict";var n=o(271);o.n(n).a},298:function(t,e,o){(t.exports=o(27)(!1)).push([t.i,".box[data-v-0876e7ce]{margin:10px;min-width:80%}.box[data-v-0876e7ce],.name[data-v-0876e7ce]{text-align:right}.name[data-v-0876e7ce]{font-size:12px;margin:5px}.bubble[data-v-0876e7ce]{color:#fff;background-color:#6495ed;border-radius:10px;padding:8px;width:unset;min-width:unset}",""])},299:function(t,e,o){"use strict";var n=o(272);o.n(n).a},300:function(t,e,o){(t.exports=o(27)(!1)).push([t.i,".box[data-v-03a3c970]{margin:10px;min-width:80%}.box[data-v-03a3c970],.name[data-v-03a3c970]{text-align:center}.name[data-v-03a3c970]{font-size:12px;margin:5px}.bubble[data-v-03a3c970]{color:grey;background-color:none;border-radius:10px;padding:8px;width:unset;min-width:unset}",""])},301:function(t,e,o){"use strict";var n=o(273);o.n(n).a},302:function(t,e,o){(t.exports=o(27)(!1)).push([t.i,".taxzi-form[data-v-4644d025]{color:#000}.taxzi-form[data-v-4644d025],.taxzi-form-button[data-v-4644d025]{background-color:#dfdfdf;border:none;border-radius:999px}.taxzi-form-button[data-v-4644d025]{font-size:18px;color:#ff9100;padding:10px}.bg[data-v-4644d025]{background-color:#f5f5f5;padding:0;min-height:100%;height:100%}.type-bar[data-v-4644d025]{padding:20px;height:80px;z-index:10;vertical-align:middle}.messages-box[data-v-4644d025],.type-bar[data-v-4644d025]{position:absolute;bottom:0;width:100%}.messages-box[data-v-4644d025]{min-height:100%;padding:125px 15px 95px;z-index:-2;background-color:#f3f3f3}.message-area[data-v-4644d025]{position:absolute;overflow:auto;max-height:100%;padding:120% 10px 90px;bottom:0;width:100%;z-index:-1;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:reverse;flex-direction:column-reverse}",""])},313:function(t,e,o){"use strict";o.r(e);o(46);var n={props:{from:String,to:String}},r=(o(291),o(29)),c=Object(r.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"box"},[o("b-row",[o("b-col",{staticStyle:{padding:"20px 20px 20px 20px","font-size":"20px"},attrs:{cols:"2"},on:{click:function(e){return t.$router.push("/home")}}},[o("fa",{attrs:{icon:"chevron-left"}})],1),t._v(" "),o("b-col",{attrs:{cols:"8"}},[o("b-row",{staticClass:"text-center"},[o("b-col",[o("div",{staticClass:"title"},[o("b",{staticClass:"taxzi-text-gradient"},[t._v("Chat")])])])],1),t._v(" "),o("b-row",{staticClass:"text-center"},[o("b-col",[o("div",{staticClass:"sub-title"},[t._v(t._s(t.from)+" "),o("fa",{staticStyle:{"font-size":"12px",margin:"0px 5px 1px 5px"},attrs:{icon:"arrow-right"}}),t._v(" "+t._s(t.to))],1)])],1)],1),t._v(" "),o("b-col",{staticStyle:{padding:"20px 20px 20px 20px","font-size":"20px"},attrs:{cols:"2"}},[o("fa",{attrs:{icon:"ellipsis-h"}})],1)],1)],1)}),[],!1,null,"6b9b6b13",null).exports,d=(o(293),Object(r.a)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"type-bar",attrs:{fluid:""}},[e("b-row",{staticClass:"text-center"},[e("b-col",{attrs:{cols:"1"}},[this._v("+")]),this._v(" "),e("b-col",{attrs:{cols:"11"}},[e("b-input-group",[e("b-form-input"),this._v(" "),e("b-input-group-append",[e("b-button",[this._v("Send")])],1)],1)],1)],1)],1)}),[],!1,null,"001cdadf",null).exports,{props:{name:String,message:String}}),l=(o(295),Object(r.a)(d,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"box"},[e("div",{staticClass:"name"},[this._v(this._s(this.name))]),this._v(" "),e("div",[e("span",{staticClass:"bubble"},[this._v(this._s(this.message))])])])}),[],!1,null,"40cdeace",null).exports),f={props:{name:String,message:String}},h=(o(297),Object(r.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"box"},[e("div",[e("span",{staticClass:"bubble"},[this._v(this._s(this.message))])])])}),[],!1,null,"0876e7ce",null).exports),x={props:{message:String}},v=(o(299),Object(r.a)(x,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"box"},[e("div",[e("span",{staticClass:"bubble"},[this._v(this._s(this.message))])])])}),[],!1,null,"03a3c970",null).exports),m={components:{ChatNav:c,Loading:o(259).a,ChatBubbleLeft:l,ChatBubbleRight:h,ChatBubbleNone:v},data:function(){return{isLoading:!1,chatData:{},chat:[{userid:"",message:""},{userid:"",message:""},{userid:"",message:""}],name:"",message:"",navFrom:"",navTo:"",chatid:"",userid:""}},mounted:function(){var t=this;this.isLoading=!0;var e=this.$store.state.party,o=this.$store.state.user;this.isLoading=!1,o||this.$router.push("/user/login"),e||this.$router.push("/home"),this.navFrom=e.from,this.navTo=e.to,this.userid=o._id,this.isLoading=!0,this.$axios.$get("http://taxzi.herokuapp.com/parties/".concat(e._id,"/chat")).then((function(e){if(e.status){var o=e.data._id;t.chatid=o,t.socket=t.$nuxtSocket({name:"chat",reconnection:!0,transports:["websocket"]}),t.socket.on("connect",(function(){t.socket.on("chat-response",(function(e){console.log(e),console.log(t.chatid),e.chatid==t.chatid&&(console.log("ADDDDD"),t.addMessage(e))})),t.socket.on("chat-error",(function(t){console.log(t),alert(t.message)}))})),t.$axios.$get("http://taxzi.herokuapp.com/chats/"+o).then((function(e){t.isLoading=!1,t.chatData=e.data;var i,o=e.data.messages;for(i=0;i<o.length;i++)t.addMessage(o[i])}))}else t.isLoading=!1,alert(e.error),t.$router.push("/home")}))},methods:{sendMessage:function(){""!=this.message&&(console.log("Sent"),this.socket.emit("chat-event",{chatid:this.chatid,userid:this.userid,message:this.message}),this.message="")},addMessage:function(t){t.name=this.getName(t.userid),this.chat.unshift(t)},getName:function(t){for(var e=this.chatData.party.members;!e;);for(var i=0;i<e.length;i++)if(e[i]._id==t)return e[i].name;return"NAMEERROR"}}},_=(o(301),Object(r.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"bg"},[t.isLoading?o("Loading"):t._e(),t._v(" "),o("ChatNav",{attrs:{from:t.navFrom,to:t.navTo}}),t._v(" "),o("div",{staticClass:"message-area"},t._l(t.chat,(function(e){return o("div",[""==e.userid?o("ChatBubbleNone",{attrs:{message:e.message}}):t._e(),t._v(" "),e.userid!=t.userid&&""!=e.userid?o("ChatBubbleLeft",{attrs:{name:e.name,message:e.message}}):t._e(),t._v(" "),e.userid==t.userid?o("ChatBubbleRight",{attrs:{name:e.name,message:e.message}}):t._e()],1)})),0),t._v(" "),o("div",{staticClass:"messages-box"}),t._v(" "),o("div",{staticClass:"type-bar"},[o("b-row",{staticClass:"text-center"},[o("b-col",{staticStyle:{padding:"5px 0px 0px 15px"},attrs:{cols:"1"}},[o("fa",{attrs:{icon:"plus"}})],1),t._v(" "),o("b-col",[o("b-input-group",[o("b-form-input",{staticClass:"taxzi-form",staticStyle:{height:"40px"},attrs:{placeholder:"Message..."},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),t._v(" "),o("b-input-group-append",{staticStyle:{height:"40px","background-color":"rgb(223, 223, 223)","border-radius":"0px 999px 999px 0px"}},[o("b-button",{staticClass:"taxzi-form-button",attrs:{variant:"link"},on:{click:t.sendMessage}},[o("fa",{attrs:{icon:"paper-plane"}})],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"4644d025",null));e.default=_.exports}}]);